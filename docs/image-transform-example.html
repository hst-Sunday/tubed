<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>图片转换功能示例 - Tubed</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 40px 20px;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    h1 {
      color: #667eea;
      margin-bottom: 10px;
      font-size: 32px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 16px;
    }

    .section {
      margin-bottom: 40px;
    }

    .section-title {
      color: #333;
      font-size: 24px;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 3px solid #667eea;
    }

    .controls {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
    }

    .control-group {
      margin-bottom: 15px;
    }

    .control-group label {
      display: block;
      color: #333;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .control-group input,
    .control-group select {
      width: 100%;
      padding: 10px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.3s;
    }

    .control-group input:focus,
    .control-group select:focus {
      outline: none;
      border-color: #667eea;
    }

    .url-display {
      background: #2d3748;
      color: #48bb78;
      padding: 15px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      word-break: break-all;
      margin-bottom: 20px;
    }

    .image-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .image-card {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
    }

    .image-card h3 {
      color: #333;
      margin-bottom: 10px;
      font-size: 16px;
    }

    .image-card img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      margin-bottom: 10px;
    }

    .image-card .info {
      font-size: 12px;
      color: #666;
    }

    .responsive-demo {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
    }

    .responsive-demo picture {
      display: block;
      margin: 20px 0;
    }

    .responsive-demo img {
      width: 100%;
      height: auto;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .code-block {
      background: #2d3748;
      color: #e2e8f0;
      padding: 20px;
      border-radius: 8px;
      overflow-x: auto;
      margin-top: 15px;
    }

    .code-block pre {
      margin: 0;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.6;
    }

    .button {
      background: #667eea;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .button:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    .note {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin: 20px 0;
      border-radius: 4px;
      color: #856404;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>🖼️ Tubed 图片转换功能示例</h1>
    <p class="subtitle">动态格式转换、尺寸调整和质量优化演示</p>

    <div class="note">
      <strong>⚠️ 注意：</strong>请将示例中的图片路径替换为你自己上传的图片路径（例如：/uploads/your-image.png）
    </div>

    <!-- 交互式控制面板 -->
    <div class="section">
      <h2 class="section-title">📋 交互式控制面板</h2>
      <div class="controls">
        <div class="control-group">
          <label for="imagePath">图片路径：</label>
          <input type="text" id="imagePath" value="/uploads/demo1.png" placeholder="/uploads/your-image.png">
        </div>
        <div class="control-group">
          <label for="format">格式：</label>
          <select id="format">
            <option value="">原格式</option>
            <option value="webp" selected>WebP</option>
            <option value="jpeg">JPEG</option>
            <option value="png">PNG</option>
            <option value="avif">AVIF</option>
            <option value="gif">GIF</option>
          </select>
        </div>
        <div class="control-group">
          <label for="quality">质量 (1-100)：</label>
          <input type="number" id="quality" value="85" min="1" max="100">
        </div>
        <div class="control-group">
          <label for="width">宽度 (像素)：</label>
          <input type="number" id="width" value="800" min="1" max="4096">
        </div>
        <div class="control-group">
          <label for="height">高度 (像素)：</label>
          <input type="number" id="height" value="" placeholder="自动">
        </div>
        <div class="control-group">
          <label for="fit">适配模式：</label>
          <select id="fit">
            <option value="cover" selected>Cover (裁剪覆盖)</option>
            <option value="contain">Contain (完整包含)</option>
            <option value="fill">Fill (拉伸填充)</option>
            <option value="inside">Inside (内部缩放)</option>
            <option value="outside">Outside (外部缩放)</option>
          </select>
        </div>
        <button class="button" onclick="updatePreview()">🔄 更新预览</button>
      </div>

      <div class="url-display" id="generatedUrl">
        生成的 URL 将显示在这里...
      </div>

      <div id="preview" class="image-card" style="display: none;">
        <h3>预览效果</h3>
        <img id="previewImage" alt="Preview">
        <div class="info" id="previewInfo"></div>
      </div>
    </div>

    <!-- 格式转换示例 -->
    <div class="section">
      <h2 class="section-title">🎨 格式转换示例</h2>
      <div class="image-grid">
        <div class="image-card">
          <h3>原始图片 (PNG)</h3>
          <img src="/uploads/demo1.png" alt="Original PNG">
          <div class="info">原始格式</div>
        </div>
        <div class="image-card">
          <h3>WebP 格式</h3>
          <img src="/uploads/demo1.png?format=webp&quality=85" alt="WebP Format">
          <div class="info">format=webp&quality=85</div>
        </div>
        <div class="image-card">
          <h3>JPEG 格式</h3>
          <img src="/uploads/demo1.png?format=jpeg&quality=85" alt="JPEG Format">
          <div class="info">format=jpeg&quality=85</div>
        </div>
      </div>
    </div>

    <!-- 尺寸调整示例 -->
    <div class="section">
      <h2 class="section-title">📏 尺寸调整示例</h2>
      <div class="image-grid">
        <div class="image-card">
          <h3>800px 宽度</h3>
          <img src="/uploads/demo1.png?format=webp&width=800" alt="800px width">
          <div class="info">format=webp&width=800</div>
        </div>
        <div class="image-card">
          <h3>400px 宽度</h3>
          <img src="/uploads/demo1.png?format=webp&width=400" alt="400px width">
          <div class="info">format=webp&width=400</div>
        </div>
        <div class="image-card">
          <h3>缩略图 (300x200)</h3>
          <img src="/uploads/demo1.png?format=webp&width=300&height=200&fit=cover" alt="Thumbnail">
          <div class="info">width=300&height=200&fit=cover</div>
        </div>
      </div>
    </div>

    <!-- 质量对比示例 -->
    <div class="section">
      <h2 class="section-title">💎 质量对比示例</h2>
      <div class="image-grid">
        <div class="image-card">
          <h3>高质量 (95)</h3>
          <img src="/uploads/demo1.png?format=webp&quality=95&width=600" alt="High Quality">
          <div class="info">quality=95</div>
        </div>
        <div class="image-card">
          <h3>标准质量 (80)</h3>
          <img src="/uploads/demo1.png?format=webp&quality=80&width=600" alt="Standard Quality">
          <div class="info">quality=80</div>
        </div>
        <div class="image-card">
          <h3>低质量 (60)</h3>
          <img src="/uploads/demo1.png?format=webp&quality=60&width=600" alt="Low Quality">
          <div class="info">quality=60</div>
        </div>
      </div>
    </div>

    <!-- 响应式图片示例 -->
    <div class="section">
      <h2 class="section-title">📱 响应式图片示例</h2>
      <div class="responsive-demo">
        <p style="margin-bottom: 15px; color: #666;">
          下面的图片会根据屏幕尺寸自动加载最合适的版本：
        </p>
        <picture>
          <source 
            media="(max-width: 640px)"
            srcset="/uploads/demo1.png?format=webp&width=640&quality=80"
            type="image/webp"
          >
          <source 
            media="(max-width: 1024px)"
            srcset="/uploads/demo1.png?format=webp&width=1024&quality=85"
            type="image/webp"
          >
          <img 
            src="/uploads/demo1.png?format=webp&width=1920&quality=90"
            alt="Responsive Image"
          >
        </picture>

        <div class="code-block">
          <pre>&lt;picture&gt;
  &lt;source 
    media="(max-width: 640px)"
    srcset="/uploads/demo1.png?format=webp&width=640&quality=80"
    type="image/webp"
  &gt;
  &lt;source 
    media="(max-width: 1024px)"
    srcset="/uploads/demo1.png?format=webp&width=1024&quality=85"
    type="image/webp"
  &gt;
  &lt;img 
    src="/uploads/demo1.png?format=webp&width=1920&quality=90"
    alt="Responsive Image"
  &gt;
&lt;/picture&gt;</pre>
        </div>
      </div>
    </div>

    <!-- 实用代码示例 -->
    <div class="section">
      <h2 class="section-title">💻 实用代码示例</h2>
      
      <h3 style="margin: 20px 0 10px; color: #333;">JavaScript 动态生成图片 URL：</h3>
      <div class="code-block">
        <pre>function generateImageUrl(path, options = {}) {
  const params = new URLSearchParams();
  
  if (options.format) params.append('format', options.format);
  if (options.quality) params.append('quality', options.quality);
  if (options.width) params.append('width', options.width);
  if (options.height) params.append('height', options.height);
  if (options.fit) params.append('fit', options.fit);
  
  const query = params.toString();
  return query ? `${path}?${query}` : path;
}

// 使用示例
const url = generateImageUrl('/uploads/demo.png', {
  format: 'webp',
  width: 800,
  quality: 85
});
console.log(url); // /uploads/demo.png?format=webp&width=800&quality=85</pre>
      </div>

      <h3 style="margin: 20px 0 10px; color: #333;">React 组件示例：</h3>
      <div class="code-block">
        <pre>function OptimizedImage({ src, alt, width, quality = 85, format = 'webp' }) {
  const imageUrl = `${src}?format=${format}&width=${width}&quality=${quality}`;
  
  return (
    &lt;img 
      src={imageUrl}
      alt={alt}
      loading="lazy"
      style={{ width: '100%', height: 'auto' }}
    /&gt;
  );
}

// 使用
&lt;OptimizedImage 
  src="/uploads/photo.png"
  alt="My Photo"
  width={800}
  quality={85}
/&gt;</pre>
      </div>
    </div>
  </div>

  <script>
    function updatePreview() {
      const imagePath = document.getElementById('imagePath').value;
      const format = document.getElementById('format').value;
      const quality = document.getElementById('quality').value;
      const width = document.getElementById('width').value;
      const height = document.getElementById('height').value;
      const fit = document.getElementById('fit').value;

      // 构建 URL
      const params = new URLSearchParams();
      if (format) params.append('format', format);
      if (quality) params.append('quality', quality);
      if (width) params.append('width', width);
      if (height) params.append('height', height);
      if (fit && height) params.append('fit', fit);

      const query = params.toString();
      const fullUrl = query ? `${imagePath}?${query}` : imagePath;

      // 显示 URL
      document.getElementById('generatedUrl').textContent = fullUrl;

      // 显示预览
      const preview = document.getElementById('preview');
      const previewImage = document.getElementById('previewImage');
      const previewInfo = document.getElementById('previewInfo');

      previewImage.src = fullUrl;
      previewInfo.textContent = query || '原始图片';
      preview.style.display = 'block';
    }

    // 页面加载时自动更新预览
    window.addEventListener('load', updatePreview);
  </script>
</body>
</html>

